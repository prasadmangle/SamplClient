<div class="product-details">
  <div class="product-form-edit" *ngIf="adminGuard.canActivate()">
    <form (submit)='updateProduct()'>
      <label>Name:</label>
      <input type="text" [(ngModel)]="product.name" name="name" />
      <br/>
      <button type="submit">Update Product</button>
      <span>
        <button (click)="redirectToHome()">Back</button>
      </span>
    </form>
  </div>
  <div class="product-form-readonly" *ngIf="!adminGuard.canActivate()">
    <label>Name:</label>
    <div>{{product.name}}</div>
    <br/>
    <span>
        <button (click)="redirectToHome()">Back</button>
      </span>
  </div>

  <br/>
  <div class="comments-section">
    <p><b>Comments: ({{product.comments.length}})</b></p>
    <div *ngFor="let c of product.comments">
      <span>{{c.body}} ({{c.date| timeAgo}})</span>
      <span>
        <span class="glyphicon glyphicon-remove-circle" (click)="removeCommentHandler(c)" *ngIf="loggedInGuard.canActivate()"></span>
      </span>
    </div>
    <form *ngIf="loggedInGuard.canActivate()">
      <input type="text" [(ngModel)]="comment" name="comment" (keydown.enter)="addComment()" />
      <button type="submit" (click)="addComment()">Add Comment</button>
    </form>
  </div>
</div>